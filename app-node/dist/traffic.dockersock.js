"use strict";
/// <reference path="./typings/main.d.ts" />
var plugins = require("./traffic.plugins");
exports.get = function () {
    var done = plugins.q.defer();
    plugins.request.get('http://unix:/var/run/docker.sock:/containers/json')
        .on("data", function (data) {
        var dataString = data.toString("utf8");
        var dataObject = JSON.parse(dataString);
        done.resolve(dataObject);
    });
    return done.promise;
};
var tickerObs = plugins.rx.Observable
    .interval(5000).repeat();
exports.noTicker = false;
exports.startTicker = function () {
    var done = plugins.q.defer();
    exports.tickerSub = tickerObs.subscribe(function (x) {
        console.log('Next: ' + x);
    }, function (err) {
        console.log('Error: ' + err);
    }, function () {
        console.log('Completed');
    });
    console.log("subscribed ticker");
    if (exports.noTicker)
        exports.tickerSub.dispose();
    return done.promise;
};
exports.getChange = function () {
};
exports.containerChange = plugins.rx.Observable.create(function (observer) {
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRyYWZmaWMuZG9ja2Vyc29jay50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsNENBQTRDO0FBQzVDLElBQU8sT0FBTyxXQUFXLG1CQUFtQixDQUFDLENBQUM7QUFFbkMsV0FBRyxHQUFHO0lBQ2IsSUFBSSxJQUFJLEdBQUcsT0FBTyxDQUFDLENBQUMsQ0FBQyxLQUFLLEVBQUUsQ0FBQztJQUM3QixPQUFPLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxtREFBbUQsQ0FBQztTQUNuRSxFQUFFLENBQUMsTUFBTSxFQUFDLFVBQVMsSUFBSTtRQUNwQixJQUFJLFVBQVUsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQ3ZDLElBQUksVUFBVSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsVUFBVSxDQUFDLENBQUM7UUFDeEMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsQ0FBQztJQUM3QixDQUFDLENBQUMsQ0FBQztJQUNQLE1BQU0sQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDO0FBQ3hCLENBQUMsQ0FBQztBQUVGLElBQUksU0FBUyxHQUFHLE9BQU8sQ0FBQyxFQUFFLENBQUMsVUFBVTtLQUNoQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUMsTUFBTSxFQUFFLENBQUM7QUFHbEIsZ0JBQVEsR0FBRyxLQUFLLENBQUM7QUFDakIsbUJBQVcsR0FBRztJQUNyQixJQUFJLElBQUksR0FBRyxPQUFPLENBQUMsQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFDO0lBQzdCLGlCQUFTLEdBQUcsU0FBUyxDQUFDLFNBQVMsQ0FDM0IsVUFBVSxDQUFDO1FBQ1AsT0FBTyxDQUFDLEdBQUcsQ0FBQyxRQUFRLEdBQUcsQ0FBQyxDQUFDLENBQUM7SUFDOUIsQ0FBQyxFQUNELFVBQVUsR0FBRztRQUNULE9BQU8sQ0FBQyxHQUFHLENBQUMsU0FBUyxHQUFHLEdBQUcsQ0FBQyxDQUFDO0lBQ2pDLENBQUMsRUFDRDtRQUNJLE9BQU8sQ0FBQyxHQUFHLENBQUMsV0FBVyxDQUFDLENBQUM7SUFDN0IsQ0FBQyxDQUNKLENBQUM7SUFDRixPQUFPLENBQUMsR0FBRyxDQUFDLG1CQUFtQixDQUFDLENBQUM7SUFDakMsRUFBRSxDQUFDLENBQUMsZ0JBQVEsQ0FBQztRQUFDLGlCQUFTLENBQUMsT0FBTyxFQUFFLENBQUM7SUFDbEMsTUFBTSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUM7QUFDeEIsQ0FBQyxDQUFDO0FBR1MsaUJBQVMsR0FBRztBQUV2QixDQUFDLENBQUM7QUFDUyx1QkFBZSxHQUFHLE9BQU8sQ0FBQyxFQUFFLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxVQUFTLFFBQVE7QUFFM0UsQ0FBQyxDQUFDLENBQUMiLCJmaWxlIjoidHJhZmZpYy5kb2NrZXJzb2NrLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4vdHlwaW5ncy9tYWluLmQudHNcIiAvPlxuaW1wb3J0IHBsdWdpbnMgPSByZXF1aXJlKFwiLi90cmFmZmljLnBsdWdpbnNcIik7XG5cbmV4cG9ydCBsZXQgZ2V0ID0gZnVuY3Rpb24oKXtcbiAgICB2YXIgZG9uZSA9IHBsdWdpbnMucS5kZWZlcigpO1xuICAgIHBsdWdpbnMucmVxdWVzdC5nZXQoJ2h0dHA6Ly91bml4Oi92YXIvcnVuL2RvY2tlci5zb2NrOi9jb250YWluZXJzL2pzb24nKVxuICAgICAgICAub24oXCJkYXRhXCIsZnVuY3Rpb24oZGF0YSl7XG4gICAgICAgICAgICBsZXQgZGF0YVN0cmluZyA9IGRhdGEudG9TdHJpbmcoXCJ1dGY4XCIpO1xuICAgICAgICAgICAgbGV0IGRhdGFPYmplY3QgPSBKU09OLnBhcnNlKGRhdGFTdHJpbmcpO1xuICAgICAgICAgICAgZG9uZS5yZXNvbHZlKGRhdGFPYmplY3QpO1xuICAgICAgICB9KTtcbiAgICByZXR1cm4gZG9uZS5wcm9taXNlO1xufTtcblxubGV0IHRpY2tlck9icyA9IHBsdWdpbnMucnguT2JzZXJ2YWJsZVxuICAgIC5pbnRlcnZhbCg1MDAwKS5yZXBlYXQoKTtcblxuZXhwb3J0IGxldCB0aWNrZXJTdWI7XG5leHBvcnQgbGV0IG5vVGlja2VyID0gZmFsc2U7XG5leHBvcnQgbGV0IHN0YXJ0VGlja2VyID0gZnVuY3Rpb24oKXtcbiAgICBsZXQgZG9uZSA9IHBsdWdpbnMucS5kZWZlcigpO1xuICAgIHRpY2tlclN1YiA9IHRpY2tlck9icy5zdWJzY3JpYmUoXG4gICAgICAgIGZ1bmN0aW9uICh4KSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnTmV4dDogJyArIHgpO1xuICAgICAgICB9LFxuICAgICAgICBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnRXJyb3I6ICcgKyBlcnIpO1xuICAgICAgICB9LFxuICAgICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnQ29tcGxldGVkJyk7XG4gICAgICAgIH1cbiAgICApO1xuICAgIGNvbnNvbGUubG9nKFwic3Vic2NyaWJlZCB0aWNrZXJcIik7XG4gICAgaWYgKG5vVGlja2VyKSB0aWNrZXJTdWIuZGlzcG9zZSgpO1xuICAgIHJldHVybiBkb25lLnByb21pc2U7XG59O1xuXG5cbmV4cG9ydCBsZXQgZ2V0Q2hhbmdlID0gZnVuY3Rpb24oKXtcblxufTtcbmV4cG9ydCBsZXQgY29udGFpbmVyQ2hhbmdlID0gcGx1Z2lucy5yeC5PYnNlcnZhYmxlLmNyZWF0ZShmdW5jdGlvbihvYnNlcnZlcil7XG4gICAgXG59KTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
